apply plugin: "com.android.library"

android {
    compileSdkVersion nusicCompileSdkVersion
    buildToolsVersion nusicBuildToolsVersion

    defaultConfig {
        minSdkVersion nusicMinSdkVersion
        targetSdkVersion nusictTargetSdkVersion
        versionCode nusicVersionCode
        versionName project.version
    }
    buildTypes {
        release {
            minifyEnabled false
            // TODO no proguarding here, only in nusic-apk?!
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
        }
    }
}

// TODO resource filtering: MD files, assets, constants
// TODO privacy Policy (wagon plugin?)
// TODO MD generation (MD plugin?)

dependencies {
    // Nusic modules
    compile(
            project(":nusic-data-api"),
            project(":nusic-core-api"),
            project(":nusic-util")
    )

    // External dependencies
    compile(
            "com.nostra13.universalimageloader:universal-image-loader:1.9.2",
            libraries.commonsIo,
            libraries.roboguice,
            libraries.slf4j,
            // An explicit log implementation is needed at compile time, because the log level is set by the app
            libraries.logback,
            libraries.androidDesign
    )
    // Enable annotation database to improve performance
    provided "org.roboguice:roboblender:3.0.1"

    // Test dependencies
    testCompile(
            libraries.junit,
            libraries.robolectric,
            libraries.robolectricAndroid
    )
}

project.tasks.withType(JavaCompile) { task ->
    options.compilerArgs << "-AguiceAnnotationDatabasePackageName=${project.group}.annotation.apk"
}
